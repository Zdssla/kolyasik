{% extends 'base.html' %}
{% load static %}

{% block title %}
–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{% endblock %}

{% block content %}
<ul class="nav nav-pills sticky-top bg-white nav-fill">
  <li class="nav-item">
    <a class="nav-link" aria-current="page" href="{% url 'main_page' %}">
      <span style="font-weight: bold;">–ì–ª–∞–≤–Ω–∞—è</span>
    </a>
  </li>
{% if not user.is_authenticated %}
  <li class="nav-item">
    <a class="nav-link" href="{% url 'register' %}">
      <span style="font-weight: bold;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'login' %}">
      <span style="font-weight: bold;">–í–æ–π—Ç–∏</span>
    </a>
  </li>
  {% else %}
	<li class="nav-item">
    <a class="nav-link" href="{% url 'courses' %}">
      <span style="font-weight: bold;">–ö—É—Ä—Å—ã</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link active" href="{% url 'profile' %}">
      <span style="font-weight: bold;">–ü—Ä–æ—Ñ–∏–ª—å</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'logout' %}">
      <span style="font-weight: bold;">–í—ã–π—Ç–∏</span>
    </a>
  </li>
  {% endif %}
</ul>
<style type="text/css">
	body {
		background: url("{% static 'images/g.jpg' %}") no-repeat center center fixed;
		background-size: cover;
		font-family: 'Segoe UI', 'Arial', sans-serif;
		color: #343a40;
		margin: 0;
		padding: 0;
	}
	body::after {
		content: "";
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(255,255,255,0.13);
		z-index: -1;
		pointer-events: none;
		transition: background 0.4s;
	}
	main {
		max-width: 700px;
		margin: 48px auto 48px auto;
		background: rgba(255,255,255,0.98);
		border-radius: 22px;
		box-shadow: 0 8px 40px 0 rgba(31, 38, 135, 0.13), 0 1.5px 8px 0 rgba(22,66,160,0.07);
		padding: 44px 36px 36px 36px;
		position: relative;
		z-index: 1;
		text-align: left;
		overflow: hidden;
	}
	h1 {
		font-size: 2.3em;
		color: #1642a0;
		text-align: center;
		margin-bottom: 30px;
		font-weight: 800;
		letter-spacing: 1px;
		text-shadow: 0 2px 8px rgba(22,66,160,0.06);
		opacity: 0;
		transform: translateY(-20px);
		transition: opacity 0.7s, transform 0.7s;
	}
	h1.visible {
		opacity: 1;
		transform: translateY(0);
	}
	h2 {
		font-size: 1.5em;
		margin-bottom: 20px;
		color: #145f25;
		font-weight: 700;
		text-align: left;
		opacity: 0;
		transform: translateY(-20px);
		transition: opacity 0.7s, transform 0.7s;
	}
	h2.visible {
		opacity: 1;
		transform: translateY(0);
	}
	h3 {
		font-size: 1.1em;
		line-height: 1.7;
		color: #34495e;
		margin-bottom: 22px;
		font-weight: 500;
		text-align: center;
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.7s, transform 0.7s;
	}
	h3.visible {
		opacity: 1;
		transform: translateY(0);
	}
	.profile-list {
		list-style: none;
		padding: 0;
		margin: 0 0 30px 0;
		display: flex;
		flex-wrap: wrap;
		gap: 14px;
	}
	.profile-list li {
		background: linear-gradient(90deg, #f7fafd 60%, #eaf6ff 100%);
		border-radius: 12px;
		box-shadow: 0 2px 10px rgba(22,66,160,0.06);
		padding: 18px 22px 18px 54px;
		position: relative;
		font-size: 1.13em;
		line-height: 1.6;
		color: #34495e;
		margin-bottom: 0;
		flex: 1 1 300px;
		min-width: 220px;
		opacity: 0;
		transform: translateY(30px);
		transition: box-shadow 0.2s, background 0.2s, transform 0.15s, opacity 0.6s;
	}
	.profile-list li.visible {
		opacity: 1;
		transform: translateY(0);
	}
	.profile-list li:last-child {
		margin-bottom: 0;
	}
	.profile-list li:before {
		content: "üë§";
		color: #1642a0;
		position: absolute;
		left: 18px;
		top: 18px;
		font-size: 1.2em;
		font-weight: bold;
		opacity: 0;
		transform: translateY(-10px) scale(0.8);
		transition: opacity 0.4s, transform 0.4s;
	}
	.profile-list li.visible:before {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
	.profile-list li:nth-child(2):before { content: "‚úâÔ∏è"; }
	.profile-list li:nth-child(3):before { content: "üìÖ"; }
	.profile-list li:nth-child(4):before { content: "üö™"; }
	.profile-list li a {
		color: #007BFF;
		font-weight: bold;
		text-decoration: none;
		transition: color 0.2s;
	}
	.profile-list li a:hover {
		text-decoration: underline;
		color: #145f25;
	}
	@media (max-width: 600px) {
		main { padding: 12px 2px 12px 2px; }
		h1 { font-size: 1.3em; }
		.profile-list { flex-direction: column; gap: 10px; }
		.profile-list li { font-size: 1em; padding-left: 38px; min-width: unset; }
	}
</style>
<main>
	<h1>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
	<h3>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã –∏ —Ç–æ—á–Ω—ã.</h3>
	<h2>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h2>
	<ul class="profile-list">
		<li>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {{ user.username }}</li>
		<li>Email: {{ user.email }}</li>
		<li>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: {{ user.date_joined }}</li>
		<li>–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ –∏–∑ —Å–≤–æ–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞, –Ω–∞–∂–º–∏—Ç–µ <a href="{% url 'logout' %}">–í—ã–π—Ç–∏</a>.</li>
	</ul>
	<h2 style="margin-top:32px;">–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
	<div style="margin-bottom: 12px; font-size: 1.13em; color: #145f25; font-weight: 600;">
		–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π —Ç–µ—Å—Ç–∞: {{ quiz_testresult|length }}
	</div>
	<ul class="profile-list">
		{% for result in quiz_testresult %}
			<li {% if forloop.first %} style="background:linear-gradient(90deg,#e3fcec 60%,#eaf6ff 100%);border:2px solid #28a745;"{% endif %}>
				–†–µ–∑—É–ª—å—Ç–∞—Ç: <b>{{ result.score }}</b> –∏–∑ <b>{{ result.total }}</b>
				&mdash; {{ result.created_at|date:"d.m.Y H:i" }}
				{% if forloop.first %}
					<span style="color:#28a745;font-weight:bold;margin-left:10px;">(–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)</span>
				{% endif %}
			</li>
		{% empty %}
			<li>–í—ã –µ—â—ë –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Ç–µ—Å—Ç.</li>
		{% endfor %}
	</ul>
</main>
<script>
  // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–µ–∫—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
  document.addEventListener('DOMContentLoaded', function () {
    function revealSectionElements() {
      document.querySelectorAll('main h1, main h2, main h3').forEach(function (el, idx) {
        const rect = el.getBoundingClientRect();
        if (rect.top < window.innerHeight - 40) {
          setTimeout(() => {
            el.classList.add('visible');
          }, idx * 100);
        }
      });
      document.querySelectorAll('.profile-list li').forEach(function (li, idx) {
        const rect = li.getBoundingClientRect();
        if (rect.top < window.innerHeight - 40) {
          setTimeout(() => {
            li.classList.add('visible');
          }, idx * 120);
        }
      });
    }
    revealSectionElements();
    window.addEventListener('scroll', revealSectionElements);
  });
</script>
{% endblock %}